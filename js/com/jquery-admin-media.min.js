function sucomInitImageUpload(){jQuery(document).on("click",".sucom_image_upload_button",function(e){sucomHandleImageUpload(this,e)})}function sucomHandleImageUpload(e,t){var a,i=jQuery(e).attr("id").replace(/^button_(.*)$/,"$1"),u="";i.match(/^.*_[0-9]+$/)&&(u=i.replace(/^(.*)(_[0-9]+)$/,"$2"),i=i.replace(/^(.*)(_[0-9]+)$/,"$1")),default_pid=jQuery(e).attr("data-pid"),t.preventDefault(),void 0!==a&&a.close(),(a=wp.media({title:sucomMediaL10n._select_image,button:{text:sucomMediaL10n._select_image},multiple:!1,library:{type:"image"}})).on("open",function(){if(jQuery.isNumeric(default_pid)&&default_pid){var t=a.state().get("selection");attachment=wp.media.attachment(default_pid),t.add(attachment?[attachment]:[])}jQuery(".media-modal",e.el).find("#media-search-input").focus()}),a.on("select",function(){var e=a.state().get("selection").first().toJSON();jQuery("#text_"+i+"_id"+u).val(e.id),jQuery("#select_"+i+"_id_pre"+u).val("wp"),jQuery("#text_"+i+"_url"+u).prop("disabled",!0)}),a.open()}jQuery(document).ready(function(){sucomInitImageUpload()});