function sucomInitImageUpload(){jQuery(document).on("click",".sucom_image_upload_button",function(e){sucomHandleImageUpload(this,e)})}function sucomHandleImageUpload(e,a){var t=jQuery(e).attr("id").replace(/^button_(.*)$/,"$1"),u="";t.match(/^.*_[0-9]+$/)&&(u=t.replace(/^(.*)(_[0-9]+)$/,"$2"),t=t.replace(/^(.*)(_[0-9]+)$/,"$1")),default_pid=jQuery(e).attr("data-pid"),a.preventDefault(),"undefined"!=typeof sucom_image_upload&&sucom_image_upload.close(),sucom_image_upload=wp.media({title:sucomMediaL10n._select_image,button:{text:sucomMediaL10n._select_image},multiple:!1,library:{type:"image"}}),sucom_image_upload.on("open",function(){if(jQuery.isNumeric(default_pid)&&default_pid){var a=sucom_image_upload.state().get("selection");attachment=wp.media.attachment(default_pid),a.add(attachment?[attachment]:[])}jQuery(".media-modal",e.el).find("#media-search-input").focus()}),sucom_image_upload.on("select",function(){var e=sucom_image_upload.state().get("selection").first().toJSON();jQuery("#text_"+t+"_id"+u).val(e.id),jQuery("#select_"+t+"_id_pre"+u).val("wp"),jQuery("#text_"+t+"_url"+u).prop("disabled",!0)}),sucom_image_upload.open()}jQuery(document).ready(function(){sucomInitImageUpload()});